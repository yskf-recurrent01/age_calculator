# JavaScript演習：年齢計算 & 誕生日カウントダウン

## 1. 概要
ユーザーが生年月日の「年」「月」「日」をセレクトボックスから選択すると、以下の2つを表示するアプリを作成します。
1.  **現在の年齢**: 「あなたは XX 歳です」
2.  **次の誕生日までのカウントダウン**: 「次の誕生日まで あと XXX日 XX時間 XX分 XX秒」

この演習では、「Dateオブジェクトによる計算」だけでなく、「ループ処理によるDOMの動的生成」や「イベントに応じた連動処理」を学びます。

## 2. 要件定義

### 2.1 セレクトボックスの動的生成
- HTMLには中身が空の `<select>` 要素（`#year`, `#month`, `#day`）が用意されています。
- **初期化時 (init)**:
    - **年**: 1900年から現在（`new Date().getFullYear()`）までの選択肢を生成して追加する。
    - **月**: 1月から12月までの選択肢を生成して追加する。
    - **日**: 初期状態では「1月」の日数（31日）を生成して追加する。
- **変更時 (changeイベント)**:
    - 「年」または「月」が変更されたら、選択されている年・月に合わせて「日」の選択肢を再生成する。
    - 例: 「2月」が選ばれたら28日（または29日）、「4月」なら30日に更新する。

### 2.2 年齢計算
- **「計算開始」ボタン** クリック時（または入力変更時）に計算を行う。
- 現在日時と、入力された生年月日から、現在の満年齢を計算して表示する。
    - ヒント: 単純な「年」の引き算だけでなく、「今年の誕生日がまだ来ていないなら -1」をする処理が必要。

### 2.3 誕生日カウントダウン
- **次の誕生日** を求めるロジック:
    - 「今年の誕生日」がまだ来ていなければ → 今年がターゲット。
    - 「今年の誕生日」がもう過ぎていれば → **来年**の誕生日がターゲット。
- 現在日時から「次の誕生日」までの残り時間（ミリ秒）を計算し、それを「日・時間・分・秒」に変換して表示する。
- 1秒ごとに表示を更新する。

## 3. 配布ファイル構成
```
age_calculator/
├── index.html   (HTML雛形：セレクトボックスと結果表示エリア)
└── script.js    (関数の枠組みのみ定義済み)
```
※ スタイルはBootstrapを使用するため、CSSファイルは今回は必須としません。

## 4. 実装のヒント

### 日の選択肢の更新テクニック
「ある月が何日まであるか」を知るには、Dateオブジェクトの仕組みを利用するのが簡単です。
```javascript
// monthは 1=1月 〜 12=12月 とします
// 日付に「0」を指定すると、「前月の末日」つまり「今月の末日」になります
const lastDay = new Date(year, month, 0).getDate();
```
※ `new Date` の月（第2引数）は `0` 始まりですが、このテクニックを使うときは少し工夫がいります。「指定した月の**翌月の0日**」を取得することで、指定した月の末日が得られます。
（例：3月の末日が知りたい → `new Date(2024, 3, 0)` → これは「4月の0日目」＝「3月31日」を意味する）

### 残り時間の計算
2つのDateオブジェクトの差分を取ると、ミリ秒単位の数値になります。
```javascript
const diff = targetDate - now; // ミリ秒
const days = Math.floor(diff / (1000 * 60 * 60 * 24)); // 日数
// 余ったミリ秒から時間を計算...
```
